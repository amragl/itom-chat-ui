# ITOM Chat Backend — Environment Variables
# Copy this file to .env and adjust values as needed.
# All variables are prefixed with CHAT_ to avoid conflicts.

# Enable debug mode (verbose logging, auto-reload)
CHAT_DEBUG=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
CHAT_LOG_LEVEL=INFO

# HTTP server port (default: 8001, avoids conflict with orchestrator on 8000)
CHAT_HTTP_PORT=8001

# Allowed CORS origins for the frontend.
# Accepts a JSON array or comma-separated string:
#   CHAT_CORS_ORIGINS=["http://localhost:3000"]
#   CHAT_CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CHAT_CORS_ORIGINS=http://localhost:3000

# URL of the ITOM Orchestrator backend
CHAT_ORCHESTRATOR_URL=http://localhost:8000

# Database connection URL (SQLite for local development)
CHAT_DATABASE_URL=sqlite:///./chat.db

# ---------------------------------------------------------------------------
# Authentication Mode
# ---------------------------------------------------------------------------
# CHAT_AUTH_MODE controls backend authentication strategy:
#   sso — (default) Validate ServiceNow OAuth Bearer tokens on every request.
#          Requires a valid CHAT_SERVICENOW_INSTANCE below.
#   dev — Development bypass. Skips Bearer token validation entirely and injects
#          a static dev user into the request context. No ServiceNow needed.
CHAT_AUTH_MODE=sso

# ServiceNow instance URL for backend token validation.
# The backend validates OAuth access tokens by calling the ServiceNow REST API.
# Must match the SERVICENOW_INSTANCE configured in the frontend.
# Only required when CHAT_AUTH_MODE=sso.
CHAT_SERVICENOW_INSTANCE=https://your-instance.service-now.com

# How long (in seconds) to cache validated tokens before re-checking with ServiceNow.
# Default: 300 (5 minutes)
CHAT_AUTH_TOKEN_CACHE_TTL=300

# ---------------------------------------------------------------------------
# Claude AI (Conversational Layer)
# ---------------------------------------------------------------------------
# When set, ALL chat messages route through Claude for semantic intent
# classification via tool_use. Claude replaces keyword routing with natural
# language understanding. When empty, the legacy keyword router is used.
CHAT_ANTHROPIC_API_KEY=

# Claude model to use (default: claude-haiku-4-5-20251001)
# CHAT_CLAUDE_MODEL=claude-haiku-4-5-20251001

# Maximum tokens for Claude responses (default: 4096)
# CHAT_CLAUDE_MAX_TOKENS=4096

# Temperature for Claude responses (default: 0.3, lower = more deterministic)
# CHAT_CLAUDE_TEMPERATURE=0.3
